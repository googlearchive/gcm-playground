<!--
// Copyright 2015 Google Inc. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
-->

<link rel="import" href="../../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../../bower_components/paper-tooltip/paper-tooltip.html">


<dom-module id="message-type-chooser">

  <style>
    :host {
      display: block;
    }
  </style>

  <template>
    <paper-radio-group on-change="messageTypeChangeHandler">
      <paper-radio-button name="unicast" id="unicast">Unicast</paper-radio-button>
      <paper-radio-button name="multicast" id="multicast">Multicast</paper-radio-button>
      <paper-radio-button name="pubsub" id="pubsub">Pubsub</paper-radio-button>
      <paper-radio-button name="notification_group" id="notification_group">Notification Group</paper-radio-button>

      <paper-tooltip for="unicast" margin-top="-10">Single recipient, HTTP or XMPP</paper-tooltip>
      <paper-tooltip for="multicast" margin-top="-10">Multiple recipients, HTTP only</paper-tooltip>
      <paper-tooltip for="pubsub" margin-top="-10">Single topic, HTTP or XMPP</paper-tooltip>
      <paper-tooltip for="notification_group" margin-top="-10">Single group, HTTP or XMPP</paper-tooltip>
    </paper-radio-group>
  </template>

  <script>

    (function () {
      Polymer({

        is: 'message-type-chooser',


        // TODO(karangoel): Remove debugging logs
        _log: function(msg) {
          utils.log('message-type-chooser', msg);
        },


        /**
         * Handles the selection of the downstream message type.
         */
        messageTypeChangeHandler: function(e) {
          var selected_type = e.target.attributes.name.value;
          this._log("Selected " + selected_type);
          this.fire('message-type-changed', { choice: selected_type });
        }

      });
    })();

  </script>

</dom-module>
